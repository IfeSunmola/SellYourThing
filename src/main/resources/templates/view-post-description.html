<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:replace="fragments :: htmlHead (pageTitle='Post Description')">
</head>
<body style="background-color: #121212" class="text-white">
	<div class="container" style="height: 99vh">
		<th:block th:replace="fragments :: navbarAndHeader"></th:block>

		<!--Start Messages-->
		<div class="d-flex justify-content-center align-items-center" th:if="${param.replySuccess}">
			<div class="alert alert-success">
				Your message has been sent.
			</div>
		</div>

		<!--Start Post/Contact form-->
		<div class="mt-5">
			<div class="row">
				<!--Start Post Info-->
				<div class="col-lg-9 col-12">
					<div>
						<p class="h1 text-center text-wrap fw-bold" th:text="${currentPost.title}"></p>
					</div>
					<div>
						<p class="fs-3 text-center" th:text="'$' + ${currentPost.price}"></p>
					</div>
					<!--Image-->
					<div>
						<img class="img-fluid" onerror="javascript:this.src='/images/spinner-aang-hehe.jpg'" th:src=" @{'../' + ${currentPost.imageUrl}}" th:alt="${currentPost.title} + ' image'">
					</div>

					<!--Start Description and Body-->
					<div>
						<p class="h2 text-start fw-bold mt-5">Description</p>
						<p class="fs-3 text-center mt-3 lh-lg" th:text="${currentPost.body}"></p>
					</div>
					<!--End Description and Body-->
				</div>
				<!--End Post Info-->

				<!--Start Contact Account Info-->
				<div class="col-lg-3 col-12 mt-lg-4">
					<!--Start Card-->
					<div class="card text-white bg-dark sticky-lg-top">
						<!--Start Card Header-->
						<div class="card-header text-center fs-5">
							<p>
								Contact <a th:href="@{|/users/${account.accountId}}" th:text="${account.firstName} + ' ' + ${account.lastName}"></a>
								about this listing
							</p>
						</div>
						<!--End Card Header-->

						<!--Start Card Body-->
						<div class="card-body">
							<form method="post" th:object="${replyToPostDto}" th:action="@{/posts/reply}">
								<!--Start Your Message-->
								<div class="mb-3">
									<label for="message" class="form-label fs-6">Your Message</label>
									<textarea class="form-control" id="message" th:field="*{message}"
											  rows="5">Hi, I am interested in this item. Is it still available?</textarea>
								</div>
								<!--End Your Message-->

								<!--Start Email-->
								<div class="mb-3">
									<label th:for="email" class="form-label fs-6">Email they will reply to:</label>
									<input type="email" class="form-control" sec:authorize="!isAuthenticated()" th:id="replyEmail"
										   th:name="replyEmail"
										   placeholder="email@address.com">
									<input type="email" class="form-control" sec:authorize="isAuthenticated()" th:id="replyEmail" th:name="replyEmail"
										   th:value="${#authentication.principal.email}">
								</div>
								<!--End Email-->

								<input hidden th:id="postId" th:name="postId" th:value="${currentPost.postId}">

								<!--Start Switch Button-->
								<div hidden class="mb-3 form-check form-switch">
									<input class="form-check-input" type="checkbox" id="sendMessageCopy" checked>
									<label class="form-check-label" for="sendMessageCopy">Send me a copy of this message</label>
								</div>
								<!--End Switch Button-->

								<!--Start Send Message-->
								<div class="d-flex justify-content-center">
									<button class="btn btn-primary" type="submit">Send Message</button>
								</div>
								<!--End Send Message-->
							</form>
						</div>
						<!--End Card Body-->
					</div>
					<!--End Card-->
				</div>
				<!--End Contact Account Info-->
			</div>
		</div>
		<!--End Post/Contact form-->
	</div>

	<th:block th:replace="fragments :: scripts"></th:block>
</body>
</html>